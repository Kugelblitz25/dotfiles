#!/bin/bash
# weather-text-icon for JetBrainsMono Nerd Font
# maps OpenWeatherMap icon codes → Nerd Font Weather glyphs

# Nerd Font weather symbols
ICON_01D=""   # clear day
ICON_01N=""   # clear night
ICON_02=""   # few clouds / scattered
ICON_09=""   # shower rain
ICON_10=""   # rain
ICON_11=""   # thunderstorm
ICON_13=""   # snow
ICON_50=""   # mist/fog
NO_DATA=""   # default

WEATHER_ICON=$(jq -r '.weather[0].icon' ~/.cache/weather.json)

if [[ "${WEATHER_ICON}" == "01d" ]]; then
    echo "${ICON_01D}"
elif [[ "${WEATHER_ICON}" == "01n" ]]; then
    echo "${ICON_01N}"
elif [[ "${WEATHER_ICON}" =~ 02.* || "${WEATHER_ICON}" =~ 03.* || "${WEATHER_ICON}" =~ 04.* ]]; then
    echo "${ICON_02}"
elif [[ "${WEATHER_ICON}" =~ 09.* ]]; then
    echo "${ICON_09}"
elif [[ "${WEATHER_ICON}" =~ 10.* ]]; then
    echo "${ICON_10}"
elif [[ "${WEATHER_ICON}" =~ 11.* ]]; then
    echo "${ICON_11}"
elif [[ "${WEATHER_ICON}" =~ 13.* ]]; then
    echo "${ICON_13}"
elif [[ "${WEATHER_ICON}" =~ 50.* ]]; then
    echo "${ICON_50}"
else
    echo "${NO_DATA}"
fi

exit 0
